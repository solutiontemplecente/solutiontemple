import Link from 'next/link';
import { Button } from '@/components/ui/button';

interface WhatsAppButtonProps {
  phoneNumber: string;
  message?: string;
}

const WhatsAppIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="40"
    height="40"
    viewBox="0 0 24 24"
    fill="currentColor"
  >
    <path
      d="M16.75 13.96c.25.13.43.2.5.28.08.09.16.2.22.33.06.13.09.28.09.43s-.04.3-.12.41c-.08.11-.2.2-.36.27a1.06 1.06 0 0 1-.46.12c-.18.01-.38.01-.59,0-.21-.01-.43-.05-.65-.12-.22-.07-.45-.16-.68-.29-.24-.13-.47-.28-.7-.45-.24-.17-.48-.37-.71-.59-.23-.22-.45-.46-.66-.72-.21-.26-.4-.53-.58-.82s-.34-.59-.47-.9c-.13-.31-.2-.62-.2-.94 0-.2.02-.38.07-.54.05-.16.13-.3.23-.42.1-.12.23-.2.38-.26.15-.06.3-.09.45-.09.12 0 .23.02.34.05.1.03.2.08.29.15s.17.15.24.24c.07.09.12.2.15.33.03.13.05.26.05.4 0 .12-.01.23-.04.33-.03.1-.07.18-.12.26-.05.08-.11.15-.17.21-.06.06-.11.13-.15.19-.04.06-.06.1-.06.14s.01.1.04.16c.03.06.06.1.1.15.04.05.1.1.15.17.06.06.12.12.18.18.06.06.13.11.2.16.07.05.13.1.18.14.05.04.1.07.14.1.04.03.09.05.13.05s.09.01.14,0a.5.5,0,0,0,.21-.09c.07-.06.13-.13.17-.21.05-.08.09-.16.12-.25.03-.09.05-.18.05-.28 0-.12-.02-.23-.06-.34s-.1-.21-.18-.31c-.08-.1-.18-.18-.28-.25-.11-.07-.22-.12-.34-.15-.12-.03-.24-.05-.36-.05s-.23.02-.34.06c-.11.04-.22.1-.31.18-.09.08-.17.18-.24.28a.8.8 0 0 0-.11.38c-.01.1-.01.2.01.28.02.08.05.15.1.21.05.06.1.1.17.16.07.05.15.1.23.13.08.04.17.06.25.06.1,0,.19,0,.28-.01.09,0,.18-.02.27-.05.09-.03.18-.06.26-.11.08-.05.15-.1.22-.16.07-.06.12-.12.17-.19.05-.07.08-.13.11-.2.03-.07.04-.13.04-.19 0-.1-.02-.19-.05-.28Z"
    />
    <path
      d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.42 1.32 4.89L2 22l5.25-1.38c1.41.81 3.02 1.28 4.79 1.28 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2Zm0 18.25a8.24 8.24 0 0 1-4.2-1.19l-.3-.18-3.12.82.83-3.04-.2-.31a8.24 8.24 0 0 1-1.28-4.38c0-4.54 3.7-8.24 8.24-8.24 4.54 0 8.24 3.7 8.24 8.24s-3.7 8.24-8.24 8.24Z"
    />
  </svg>
);

const WhatsAppButton = ({ phoneNumber, message }: WhatsAppButtonProps) => {
  const sanitizedPhoneNumber = phoneNumber.replace(/[^0-9]/g, '');
  const whatsAppUrl = `https://wa.me/${sanitizedPhoneNumber}${message ? `?text=${encodeURIComponent(message)}` : ''}`;

  return (
    <Button
      asChild
      className="fixed bottom-6 right-6 z-50 h-16 w-16 rounded-full bg-green-500 text-white shadow-lg transition-transform hover:bg-green-600 hover:scale-110"
      aria-label="Chat on WhatsApp"
    >
      <Link href={whatsAppUrl} target="_blank" rel="noopener noreferrer">
        <WhatsAppIcon />
      </Link>
    </Button>
  );
};

export default WhatsAppButton;
